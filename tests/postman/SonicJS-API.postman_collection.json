{
  "info": {
    "name": "SonicJS API Testing",
    "description": "Comprehensive API testing collection for SonicJS with automated authentication",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "2.0.0"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{authToken}}",
        "type": "string"
      }
    ]
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Auto-login if no token or token expired",
          "const authToken = pm.collectionVariables.get('authToken');",
          "const tokenExpiry = pm.collectionVariables.get('tokenExpiry');",
          "const now = Date.now();",
          "",
          "// Skip auth for auth endpoints themselves",
          "const requestUrl = pm.request.url.toString();",
          "if (requestUrl.includes('/auth/login') || requestUrl.includes('/auth/register') || requestUrl.includes('/auth/seed-admin') || requestUrl.includes('/auth/otp/') || requestUrl.includes('/api/health') || requestUrl.includes('/api/system/')) {",
          "  return;",
          "}",
          "",
          "// Check if we need to login",
          "if (!authToken || !tokenExpiry || now >= tokenExpiry) {",
          "  console.log('Token missing or expired, performing auto-login...');",
          "  ",
          "  const loginRequest = {",
          "    url: pm.variables.get('baseUrl') + '/auth/login',",
          "    method: 'POST',",
          "    header: {",
          "      'Content-Type': 'application/json'",
          "    },",
          "    body: {",
          "      mode: 'raw',",
          "      raw: JSON.stringify({",
          "        email: pm.environment.get('testUserEmail') || 'admin@sonicjs.com',",
          "        password: pm.environment.get('testUserPassword') || 'sonicjs!'",
          "      })",
          "    }",
          "  };",
          "  ",
          "  pm.sendRequest(loginRequest, (err, response) => {",
          "    if (err) {",
          "      console.error('Auto-login failed:', err);",
          "      return;",
          "    }",
          "    ",
          "    if (response.code === 200) {",
          "      const jsonData = response.json();",
          "      pm.collectionVariables.set('authToken', jsonData.token);",
          "      pm.collectionVariables.set('userId', jsonData.user.id);",
          "      pm.collectionVariables.set('userEmail', jsonData.user.email);",
          "      ",
          "      // Set token expiry (1 hour from now)",
          "      const expiryTime = Date.now() + (60 * 60 * 1000);",
          "      pm.collectionVariables.set('tokenExpiry', expiryTime);",
          "      ",
          "      console.log('Auto-login successful!');",
          "    } else {",
          "      console.error('Auto-login failed with status:', response.code);",
          "    }",
          "  });",
          "}"
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8787",
      "type": "string"
    },
    {
      "key": "authToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "tokenExpiry",
      "value": "",
      "type": "string"
    },
    {
      "key": "userId",
      "value": "",
      "type": "string"
    },
    {
      "key": "userEmail",
      "value": "",
      "type": "string"
    },
    {
      "key": "testContentId",
      "value": "",
      "type": "string"
    },
    {
      "key": "testMediaId",
      "value": "",
      "type": "string"
    },
    {
      "key": "testPluginId",
      "value": "database-tools",
      "type": "string"
    },
    {
      "key": "testUserId",
      "value": "",
      "type": "string"
    },
    {
      "key": "otpEmail",
      "value": "test@example.com",
      "type": "string"
    },
    {
      "key": "otpCode",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Public API",
      "item": [
        {
          "name": "Health Check (Root)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          }
        },
        {
          "name": "API Health Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/health",
              "host": ["{{baseUrl}}"],
              "path": ["api", "health"]
            }
          }
        },
        {
          "name": "Get API Info",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/",
              "host": ["{{baseUrl}}"],
              "path": ["api", ""]
            }
          }
        },
        {
          "name": "List Collections",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/collections",
              "host": ["{{baseUrl}}"],
              "path": ["api", "collections"]
            }
          }
        },
        {
          "name": "Get Content (with filters)",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/content?limit=10&offset=0&sort=created_at&order=desc",
              "host": ["{{baseUrl}}"],
              "path": ["api", "content"],
              "query": [
                {
                  "key": "limit",
                  "value": "10"
                },
                {
                  "key": "offset",
                  "value": "0"
                },
                {
                  "key": "sort",
                  "value": "created_at"
                },
                {
                  "key": "order",
                  "value": "desc"
                },
                {
                  "key": "status",
                  "value": "published",
                  "disabled": true
                },
                {
                  "key": "collection",
                  "value": "pages",
                  "disabled": true
                }
              ]
            }
          }
        },
        {
          "name": "Get Content by ID",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/content/{{testContentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "content", "{{testContentId}}"]
            }
          }
        },
        {
          "name": "Get Collection Content",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/collections/pages/content",
              "host": ["{{baseUrl}}"],
              "path": ["api", "collections", "pages", "content"]
            }
          }
        }
      ]
    },
    {
      "name": "System API",
      "item": [
        {
          "name": "System Health Check",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/system/health",
              "host": ["{{baseUrl}}"],
              "path": ["api", "system", "health"]
            }
          }
        },
        {
          "name": "System Info",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/system/info",
              "host": ["{{baseUrl}}"],
              "path": ["api", "system", "info"]
            }
          }
        },
        {
          "name": "System Stats",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/system/stats",
              "host": ["{{baseUrl}}"],
              "path": ["api", "system", "stats"]
            }
          }
        },
        {
          "name": "System Ping",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/system/ping",
              "host": ["{{baseUrl}}"],
              "path": ["api", "system", "ping"]
            }
          }
        },
        {
          "name": "System Environment",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/system/env",
              "host": ["{{baseUrl}}"],
              "path": ["api", "system", "env"]
            }
          }
        }
      ]
    },
    {
      "name": "Authentication",
      "item": [
        {
          "name": "Seed Admin User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const jsonData = pm.response.json();",
                  "  console.log('Admin user created:', jsonData);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@sonicjs.com\",\n  \"password\": \"sonicjs!\",\n  \"name\": \"Admin User\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/seed-admin",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "seed-admin"]
            }
          }
        },
        {
          "name": "Register User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "  const jsonData = pm.response.json();",
                  "  pm.collectionVariables.set('authToken', jsonData.token);",
                  "  pm.collectionVariables.set('userId', jsonData.user.id);",
                  "  pm.collectionVariables.set('userEmail', jsonData.user.email);",
                  "  ",
                  "  const expiryTime = Date.now() + (60 * 60 * 1000);",
                  "  pm.collectionVariables.set('tokenExpiry', expiryTime);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@example.com\",\n  \"password\": \"Test123!\",\n  \"username\": \"testuser\",\n  \"firstName\": \"Test\",\n  \"lastName\": \"User\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "register"]
            }
          }
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const jsonData = pm.response.json();",
                  "  pm.collectionVariables.set('authToken', jsonData.token);",
                  "  pm.collectionVariables.set('userId', jsonData.user.id);",
                  "  pm.collectionVariables.set('userEmail', jsonData.user.email);",
                  "  ",
                  "  const expiryTime = Date.now() + (60 * 60 * 1000);",
                  "  pm.collectionVariables.set('tokenExpiry', expiryTime);",
                  "  ",
                  "  console.log('Login successful, token saved');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@sonicjs.com\",\n  \"password\": \"sonicjs!\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "login"]
            }
          }
        },
        {
          "name": "Get Current User",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/me",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "me"]
            }
          }
        },
        {
          "name": "Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const jsonData = pm.response.json();",
                  "  pm.collectionVariables.set('authToken', jsonData.token);",
                  "  ",
                  "  const expiryTime = Date.now() + (60 * 60 * 1000);",
                  "  pm.collectionVariables.set('tokenExpiry', expiryTime);",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/refresh",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "refresh"]
            }
          }
        },
        {
          "name": "Logout",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.collectionVariables.set('authToken', '');",
                  "pm.collectionVariables.set('tokenExpiry', '');",
                  "console.log('Logged out, token cleared');"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/auth/logout",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "logout"]
            }
          }
        },
        {
          "name": "Request Password Reset",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "email",
                  "value": "admin@sonicjs.com",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/auth/request-password-reset",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "request-password-reset"]
            }
          }
        },
        {
          "name": "Reset Password",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "token",
                  "value": "reset-token-here",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "NewPassword123!",
                  "type": "text"
                },
                {
                  "key": "confirm_password",
                  "value": "NewPassword123!",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/auth/reset-password",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "reset-password"]
            }
          }
        }
      ]
    },
    {
      "name": "OTP Authentication",
      "description": "Passwordless authentication via email one-time codes. The OTP plugin must be active for these endpoints to work.",
      "item": [
        {
          "name": "Request OTP Code",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const jsonData = pm.response.json();",
                  "  console.log('OTP Response:', jsonData);",
                  "  ",
                  "  // In development mode, the code is returned in the response",
                  "  if (jsonData.dev_code) {",
                  "    pm.collectionVariables.set('otpCode', jsonData.dev_code);",
                  "    console.log('Development OTP Code saved:', jsonData.dev_code);",
                  "  }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{otpEmail}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/otp/request",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "otp", "request"]
            }
          }
        },
        {
          "name": "Verify OTP Code",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const jsonData = pm.response.json();",
                  "  console.log('OTP Verification Response:', jsonData);",
                  "  ",
                  "  if (jsonData.success) {",
                  "    console.log('OTP verification successful!');",
                  "    // If a token is returned, save it",
                  "    if (jsonData.token) {",
                  "      pm.collectionVariables.set('authToken', jsonData.token);",
                  "      const expiryTime = Date.now() + (60 * 60 * 1000);",
                  "      pm.collectionVariables.set('tokenExpiry', expiryTime);",
                  "    }",
                  "  }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{otpEmail}}\",\n  \"code\": \"{{otpCode}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/otp/verify",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "otp", "verify"]
            }
          }
        },
        {
          "name": "Resend OTP Code",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "  const jsonData = pm.response.json();",
                  "  console.log('OTP Resend Response:', jsonData);",
                  "  ",
                  "  // In development mode, the new code is returned in the response",
                  "  if (jsonData.dev_code) {",
                  "    pm.collectionVariables.set('otpCode', jsonData.dev_code);",
                  "    console.log('New Development OTP Code saved:', jsonData.dev_code);",
                  "  }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"{{otpEmail}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/auth/otp/resend",
              "host": ["{{baseUrl}}"],
              "path": ["auth", "otp", "resend"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Users",
      "item": [
        {
          "name": "List Users",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Accept",
                "value": "application/json"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/admin/users?page=1&limit=20&status=active",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "status",
                  "value": "active"
                },
                {
                  "key": "search",
                  "value": "",
                  "disabled": true
                },
                {
                  "key": "role",
                  "value": "admin",
                  "disabled": true
                }
              ]
            }
          }
        },
        {
          "name": "Get User by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{testUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{testUserId}}"]
            }
          }
        },
        {
          "name": "Create User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "// Check for redirect (successful creation redirects)",
                  "if (pm.response.code === 302 || pm.response.code === 200) {",
                  "  console.log('User created successfully');",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "email",
                  "value": "newuser@example.com",
                  "type": "text"
                },
                {
                  "key": "username",
                  "value": "newuser",
                  "type": "text"
                },
                {
                  "key": "first_name",
                  "value": "New",
                  "type": "text"
                },
                {
                  "key": "last_name",
                  "value": "User",
                  "type": "text"
                },
                {
                  "key": "password",
                  "value": "Password123!",
                  "type": "text"
                },
                {
                  "key": "confirm_password",
                  "value": "Password123!",
                  "type": "text"
                },
                {
                  "key": "role",
                  "value": "viewer",
                  "type": "text"
                },
                {
                  "key": "is_active",
                  "value": "1",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/new",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "new"]
            }
          }
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "email",
                  "value": "updated@example.com",
                  "type": "text"
                },
                {
                  "key": "username",
                  "value": "updateduser",
                  "type": "text"
                },
                {
                  "key": "first_name",
                  "value": "Updated",
                  "type": "text"
                },
                {
                  "key": "last_name",
                  "value": "User",
                  "type": "text"
                },
                {
                  "key": "role",
                  "value": "editor",
                  "type": "text"
                },
                {
                  "key": "is_active",
                  "value": "1",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{testUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{testUserId}}"]
            }
          }
        },
        {
          "name": "Toggle User Status",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"active\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{testUserId}}/toggle",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{testUserId}}", "toggle"]
            }
          }
        },
        {
          "name": "Delete User (Soft)",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"hardDelete\": false\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/users/{{testUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "users", "{{testUserId}}"]
            }
          }
        },
        {
          "name": "Invite User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "email",
                  "value": "invited@example.com",
                  "type": "text"
                },
                {
                  "key": "first_name",
                  "value": "Invited",
                  "type": "text"
                },
                {
                  "key": "last_name",
                  "value": "User",
                  "type": "text"
                },
                {
                  "key": "role",
                  "value": "editor",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/admin/invite-user",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "invite-user"]
            }
          }
        },
        {
          "name": "Resend Invitation",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/resend-invitation/{{testUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "resend-invitation", "{{testUserId}}"]
            }
          }
        },
        {
          "name": "Cancel Invitation",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/cancel-invitation/{{testUserId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "cancel-invitation", "{{testUserId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Profile",
      "item": [
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/profile",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "profile"]
            }
          }
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "first_name",
                  "value": "Updated",
                  "type": "text"
                },
                {
                  "key": "last_name",
                  "value": "Name",
                  "type": "text"
                },
                {
                  "key": "username",
                  "value": "updatedadmin",
                  "type": "text"
                },
                {
                  "key": "email",
                  "value": "admin@sonicjs.com",
                  "type": "text"
                },
                {
                  "key": "timezone",
                  "value": "America/New_York",
                  "type": "text"
                },
                {
                  "key": "language",
                  "value": "en",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/admin/profile",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "profile"]
            }
          }
        },
        {
          "name": "Change Password",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "current_password",
                  "value": "sonicjs!",
                  "type": "text"
                },
                {
                  "key": "new_password",
                  "value": "NewPassword123!",
                  "type": "text"
                },
                {
                  "key": "confirm_password",
                  "value": "NewPassword123!",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/admin/profile/password",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "profile", "password"]
            }
          }
        },
        {
          "name": "Upload Avatar",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "avatar",
                  "type": "file",
                  "src": [],
                  "description": "Select an image file (JPEG, PNG, GIF, or WebP)"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/admin/profile/avatar",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "profile", "avatar"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Content",
      "item": [
        {
          "name": "List Content",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/content/?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "content", ""],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "collection",
                  "value": "pages",
                  "disabled": true
                },
                {
                  "key": "status",
                  "value": "published",
                  "disabled": true
                }
              ]
            }
          }
        },
        {
          "name": "Create Content",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "  try {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.id) {",
                  "      pm.collectionVariables.set('testContentId', jsonData.id);",
                  "      console.log('Content created with ID:', jsonData.id);",
                  "    }",
                  "  } catch (e) {",
                  "    console.log('Response is not JSON or ID not found');",
                  "  }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Test Content\",\n  \"slug\": \"test-content\",\n  \"collection\": \"pages\",\n  \"status\": \"draft\",\n  \"fields\": {\n    \"body\": \"This is test content created via Postman\",\n    \"excerpt\": \"Test excerpt\"\n  },\n  \"metadata\": {\n    \"tags\": [\"test\", \"postman\"]\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/content/",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "content", ""]
            }
          }
        },
        {
          "name": "Get Content by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/content/{{testContentId}}/edit",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "content", "{{testContentId}}", "edit"]
            }
          }
        },
        {
          "name": "Update Content",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Updated Test Content\",\n  \"slug\": \"test-content-updated\",\n  \"status\": \"published\",\n  \"fields\": {\n    \"body\": \"This content has been updated via Postman\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/content/{{testContentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "content", "{{testContentId}}"]
            }
          }
        },
        {
          "name": "Duplicate Content",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"contentId\": \"{{testContentId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/content/duplicate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "content", "duplicate"]
            }
          }
        },
        {
          "name": "Get Content Versions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/content/{{testContentId}}/versions",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "content", "{{testContentId}}", "versions"]
            }
          }
        },
        {
          "name": "Restore Content Version",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/content/{{testContentId}}/restore/1",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "content", "{{testContentId}}", "restore", "1"]
            }
          }
        },
        {
          "name": "Bulk Actions",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"action\": \"publish\",\n  \"contentIds\": [\"{{testContentId}}\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/content/bulk-action",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "content", "bulk-action"]
            }
          }
        },
        {
          "name": "Delete Content",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/content/{{testContentId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "content", "{{testContentId}}"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Media",
      "item": [
        {
          "name": "List Media",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/media/?page=1&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "media", ""],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "folder",
                  "value": "uploads",
                  "disabled": true
                },
                {
                  "key": "type",
                  "value": "image",
                  "disabled": true
                }
              ]
            }
          }
        },
        {
          "name": "Upload Media (Single)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200 || pm.response.code === 201) {",
                  "  try {",
                  "    const jsonData = pm.response.json();",
                  "    if (jsonData.file && jsonData.file.id) {",
                  "      pm.collectionVariables.set('testMediaId', jsonData.file.id);",
                  "      console.log('Media uploaded with ID:', jsonData.file.id);",
                  "    }",
                  "  } catch (e) {",
                  "    console.log('Response processing error');",
                  "  }",
                  "}"
                ]
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": [],
                  "description": "Select a file to upload"
                },
                {
                  "key": "folder",
                  "value": "uploads",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/media/upload",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "upload"]
            }
          }
        },
        {
          "name": "Upload Media (Multiple)",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "files",
                  "type": "file",
                  "src": [],
                  "description": "Select multiple files to upload"
                },
                {
                  "key": "folder",
                  "value": "uploads",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/media/upload-multiple",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "upload-multiple"]
            }
          }
        },
        {
          "name": "Update Media Metadata",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"alt\": \"Updated alt text\",\n  \"caption\": \"Updated caption via Postman\",\n  \"tags\": [\"updated\", \"postman\"],\n  \"folder\": \"updated-folder\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/media/{{testMediaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "{{testMediaId}}"]
            }
          }
        },
        {
          "name": "Create Folder",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"folderName\": \"new-folder\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/media/create-folder",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "create-folder"]
            }
          }
        },
        {
          "name": "Bulk Move Files",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fileIds\": [\"{{testMediaId}}\"],\n  \"folder\": \"archived\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/media/bulk-move",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "bulk-move"]
            }
          }
        },
        {
          "name": "Bulk Delete Files",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fileIds\": [\"{{testMediaId}}\"]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/media/bulk-delete",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "bulk-delete"]
            }
          }
        },
        {
          "name": "Delete Media",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/media/{{testMediaId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "media", "{{testMediaId}}"]
            }
          }
        },
        {
          "name": "Serve Media File",
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/files/uploads/example-file.jpg",
              "host": ["{{baseUrl}}"],
              "path": ["files", "uploads", "example-file.jpg"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Plugins",
      "item": [
        {
          "name": "List Plugins",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/plugins",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "plugins"]
            }
          }
        },
        {
          "name": "Get Plugin Settings",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/plugins/{{testPluginId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "plugins", "{{testPluginId}}"]
            }
          }
        },
        {
          "name": "Activate Plugin",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/plugins/{{testPluginId}}/activate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "plugins", "{{testPluginId}}", "activate"]
            }
          }
        },
        {
          "name": "Deactivate Plugin",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/plugins/{{testPluginId}}/deactivate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "plugins", "{{testPluginId}}", "deactivate"]
            }
          }
        },
        {
          "name": "Install Plugin",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"pluginId\": \"new-plugin-id\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/plugins/install",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "plugins", "install"]
            }
          }
        },
        {
          "name": "Uninstall Plugin",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/plugins/{{testPluginId}}/uninstall",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "plugins", "{{testPluginId}}", "uninstall"]
            }
          }
        },
        {
          "name": "Update Plugin Settings",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"settings\": {\n    \"enableTruncate\": true,\n    \"requireConfirmation\": true\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/plugins/{{testPluginId}}/settings",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "plugins", "{{testPluginId}}", "settings"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Settings",
      "item": [
        {
          "name": "Get Migrations Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/settings/api/migrations/status",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "settings", "api", "migrations", "status"]
            }
          }
        },
        {
          "name": "Run Migrations",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/settings/api/migrations/run",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "settings", "api", "migrations", "run"]
            }
          }
        },
        {
          "name": "Validate Database Schema",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/settings/api/migrations/validate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "settings", "api", "migrations", "validate"]
            }
          }
        },
        {
          "name": "Get Database Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/settings/api/database-tools/stats",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "settings", "api", "database-tools", "stats"]
            }
          }
        },
        {
          "name": "Validate Database",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/settings/api/database-tools/validate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "settings", "api", "database-tools", "validate"]
            }
          }
        },
        {
          "name": "Backup Database",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/settings/api/database-tools/backup",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "settings", "api", "database-tools", "backup"]
            }
          }
        },
        {
          "name": "Truncate Tables",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"tables\": [\"content\"],\n  \"confirm\": true\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/admin/settings/api/database-tools/truncate",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "settings", "api", "database-tools", "truncate"]
            }
          }
        },
        {
          "name": "Update General Settings",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/x-www-form-urlencoded"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "siteName",
                  "value": "My SonicJS Site",
                  "type": "text"
                },
                {
                  "key": "siteDescription",
                  "value": "A headless CMS powered by SonicJS",
                  "type": "text"
                },
                {
                  "key": "adminEmail",
                  "value": "admin@sonicjs.com",
                  "type": "text"
                },
                {
                  "key": "timezone",
                  "value": "UTC",
                  "type": "text"
                },
                {
                  "key": "language",
                  "value": "en",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/admin/settings/general",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "settings", "general"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Activity Logs",
      "item": [
        {
          "name": "View Activity Logs",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/activity-logs?page=1&limit=50",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "activity-logs"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "50"
                },
                {
                  "key": "action",
                  "value": "user.login",
                  "disabled": true
                },
                {
                  "key": "resource_type",
                  "value": "users",
                  "disabled": true
                },
                {
                  "key": "date_from",
                  "value": "2024-01-01",
                  "disabled": true
                },
                {
                  "key": "date_to",
                  "value": "2024-12-31",
                  "disabled": true
                }
              ]
            }
          }
        },
        {
          "name": "Export Activity Logs (CSV)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/activity-logs/export",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "activity-logs", "export"]
            }
          }
        }
      ]
    },
    {
      "name": "Admin - Dashboard API",
      "item": [
        {
          "name": "Get Dashboard Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/api/stats",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "api", "stats"]
            }
          }
        },
        {
          "name": "Get Storage Info",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/api/storage",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "api", "storage"]
            }
          }
        },
        {
          "name": "Get Recent Activity",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/api/activity",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "api", "activity"]
            }
          }
        }
      ]
    }
  ]
}
