!function(a){a.fn.gridEditor=function(b){var c=this,d=c.data("grideditor");if("getHtml"==arguments[0]){if(d){d.deinit();var e=c.html();return d.init(),e}return c.html()}return"remove"==arguments[0]?void(d&&d.remove()):(c.each(function(c,d){function e(){D=d.addClass("ge-canvas"),H=a('<textarea class="ge-html-output"/>').insertBefore(D),E=a('<div class="ge-mainControls" />').insertBefore(H),F=a('<div class="ge-wrapper ge-top" />').appendTo(E),G=a('<div class="ge-addRowGroup btn-group" />').appendTo(F),a.each(I.new_row_layouts,function(b,c){var d=a('<a class="btn btn-sm btn-primary" />').attr("title","Add row "+c.join("-")).on("click",function(){var a=u().appendTo(D);c.forEach(function(b){v(b).appendTo(a)}),h()}).appendTo(G);d.append('<span class="glyphicon glyphicon-plus-sign"/>');var e=(c.join(" - "),'<div class="row ge-row-icon">');c.forEach(function(a){e+='<div class="column col-'+a+'"/>'}),e+="</div>",d.append(e)});var b=a('<div class="dropdown pull-right ge-layout-mode"><button type="button" class="btn btn-sm btn-primary dropdown-toggle" data-toggle="dropdown"><span>Desktop</span></button><ul class="dropdown-menu" role="menu"><li><a data-width="auto" title="Desktop"><span>Desktop</span></a></li><li><a title="Tablet"><span>Tablet</span></li><li><a title="Phone"><span>Phone</span></a></li></ul></div>').on("click","a",function(){var c=a(this);A(c.closest("li").index());var d=b.find("button");d.find("span").remove(),d.append(c.find("span").clone())}).appendTo(F),c=a('<div class="btn-group pull-right"/>').appendTo(F),e=a('<button title="Edit Source Code" type="button" class="btn btn-sm btn-primary gm-edit-mode"><span class="glyphicon glyphicon-chevron-left"></span><span class="glyphicon glyphicon-chevron-right"></span></button>').on("click",function(){e.hasClass("active")?(D.empty().html(H.val()).show(),h(),H.hide()):(i(),H.height(.8*a(window).height()).val(D.html()).show(),D.hide()),e.toggleClass("active btn-danger")}).appendTo(c),j=a('<button title="Preview" type="button" class="btn btn-sm btn-primary gm-preview"><span class="glyphicon glyphicon-eye-open"></span></button>').on("mouseenter",function(){D.removeClass("ge-editing")}).on("click",function(){j.toggleClass("active btn-danger").trigger("mouseleave")}).on("mouseleave",function(){j.hasClass("active")||D.addClass("ge-editing")}).appendTo(c);a(window).on("scroll",f),D.on("click",".ge-content",g)}function f(b){var c=a(window);c.scrollTop()>E.offset().top&&c.scrollTop()<D.offset().top+D.height()?F.hasClass("ge-top")&&F.css({left:F.offset().left,width:F.outerWidth()}).removeClass("ge-top").addClass("ge-fixed"):F.hasClass("ge-fixed")&&F.css({left:"",width:""}).removeClass("ge-fixed").addClass("ge-top")}function g(b){if(!a(this).hasClass("ge-rte-active")){var c=B(a(this).data("ge-content-type"));c&&(a(this).addClass("ge-rte-active",!0),c.init(I,a(this)))}}function h(){w(!0),D.addClass("ge-editing"),o(),x(),k(),l(),s(),A(K)}function i(){D.removeClass("ge-editing");D.find(".ge-content").removeClass("ge-rte-active").each(function(){var b=a(this);B(b.data("ge-content-type")).deinit(I,b)});D.find(".ge-tools-drawer").remove(),t(),w(!1)}function j(){i(),E.remove(),H.remove(),a(window).off("scroll",f),D.off("click",".ge-content",g),D.removeData("grideditor")}function k(){D.find(".row").each(function(){var b=a(this);if(!b.find("> .ge-tools-drawer").length){var c=a('<div class="ge-tools-drawer" />').prependTo(b);m(c,"Move","ge-move","glyphicon-move"),m(c,"Settings","","glyphicon-cog",function(){d.toggle()}),I.row_tools.forEach(function(a){m(c,a.title||"",a.className||"",a.iconClass||"glyphicon-wrench",a.on)}),m(c,"Remove row","","glyphicon-trash",function(){window.confirm("Delete row?")&&b.slideUp(function(){b.remove()})}),m(c,"Add column","ge-add-column","glyphicon-plus-sign",function(){b.append(v(3)),h()});var d=n(b,I.row_classes).appendTo(c)}})}function l(){D.find(".column").each(function(){var b=a(this);if(!b.find("> .ge-tools-drawer").length){var c=a('<div class="ge-tools-drawer" />').prependTo(b);m(c,"Move","ge-move","glyphicon-move"),m(c,"Make column narrower\n(hold shift for min)","ge-decrease-col-width","glyphicon-minus",function(a){var c=I.valid_col_sizes,d=J[K],e=c.indexOf(p(b,d)),f=c[C(e-1,0,c.length-1)];a.shiftKey&&(f=c[0]),r(b,d,Math.max(f,1))}),m(c,"Make column wider\n(hold shift for max)","ge-increase-col-width","glyphicon-plus",function(a){var c=I.valid_col_sizes,d=J[K],e=c.indexOf(p(b,d)),f=C(e+1,0,c.length-1),g=c[f];a.shiftKey&&(g=c[c.length-1]),r(b,d,Math.min(g,L))}),m(c,"Settings","","glyphicon-cog",function(){d.toggle()}),I.col_tools.forEach(function(a){m(c,a.title||"",a.className||"",a.iconClass||"glyphicon-wrench",a.on)}),m(c,"Remove col","","glyphicon-trash",function(){window.confirm("Delete column?")&&b.animate({opacity:"hide",width:"hide",height:"hide"},400,function(){b.remove()})}),m(c,"Add row","ge-add-row","glyphicon-plus-sign",function(){var a=u();b.append(a),a.append(v(6)).append(v(6)),h()});var d=n(b,I.col_classes).appendTo(c)}})}function m(b,c,d,e,f){var g=a('<a title="'+c+'" class="'+d+'"><span class="glyphicon '+e+'"></span></a>').appendTo(b);"function"==typeof f&&g.on("click",f),"object"==typeof f&&a.each(f,function(a,b){g.on(a,b)})}function n(b,c){var d=a('<div class="ge-details" />');a('<input class="ge-id" />').attr("placeholder","id").val(b.attr("id")).attr("title","Set a unique identifier").appendTo(d).change(function(){b.attr("id",this.value)});var e=a('<div class="btn-group" />').appendTo(d);return c.forEach(function(c){var d=a('<a class="btn btn-sm btn-default" />').html(c.label).attr("title",c.title?c.title:'Toggle "'+c.label+'" styling').toggleClass("active btn-primary",b.hasClass(c.cssClass)).on("click",function(){d.toggleClass("active btn-primary"),b.toggleClass(c.cssClass,d.hasClass("active"))}).appendTo(e)}),d}function o(){D.find('.column, div[class*="col-"]').each(function(){var b=a(this),c=2,d=q(b);d.length&&(c=d[0].size);var e=b.attr("class");J.forEach(function(a){-1==e.indexOf(a)&&b.addClass(a+c)}),b.addClass("column")})}function p(a,b){for(var c=q(a),d=0;d<c.length;d++)if(c[d].colClass==b)return c[d].size;return c.length?c[0].size:null}function q(a){var b=[];return J.forEach(function(c){var d=new RegExp(c+"(\\d+)","i");d.test(a.attr("class"))&&b.push({colClass:c,size:parseInt(d.exec(a.attr("class"))[1])})}),b}function r(a,b,c){var d=new RegExp("("+b+"(\\d+))","i"),e=d.exec(a.attr("class"));e&&parseInt(e[2])!==c?a.switchClass(e[1],b+c,50):a.addClass(b+c)}function s(){function a(a,b){b.placeholder.css({height:b.item.outerHeight()})}D.find(".row").sortable({items:"> .column",connectWith:".ge-canvas .row",handle:"> .ge-tools-drawer .ge-move",start:a,helper:"clone"}),D.add(D.find(".column")).sortable({items:"> .row, > .ge-content",connectsWith:".ge-canvas, .ge-canvas .column",handle:"> .ge-tools-drawer .ge-move",start:a,helper:"clone"})}function t(){D.add(D.find(".column")).add(D.find(".row")).sortable("destroy")}function u(){return a('<div class="row" />')}function v(b){return a("<div/>").addClass(J.map(function(a){return a+b}).join(" ")).append(z().html(B(I.content_types[0]).initialContent))}function w(b){I.custom_filter.length&&a.each(I.custom_filter,function(a,c){"string"==typeof c&&(c=window[c]),c(D,b)})}function x(){D.find(".column").each(function(){var b=a(this),c=a();b.children().each(function(){var b=a(this);b.is(".row, .ge-tools-drawer, .ge-content")?y(c):c=c.add(b)}),y(c)})}function y(b){if(b.length){var c=z().insertAfter(b.last());b.appendTo(c),b=a()}}function z(){return a("<div/>").addClass("ge-content ge-content-type-"+I.content_types[0]).attr("data-ge-content-type",I.content_types[0])}function A(a){K=a;var b=["ge-layout-desktop","ge-layout-tablet","ge-layout-phone"];b.forEach(function(b,c){D.toggleClass(b,c==a)})}function B(b){return a.fn.gridEditor.RTEs[b]}function C(a,b,c){return Math.min(c,Math.max(b,a))}d=a(d);var D,E,F,G,H,I=a.extend({new_row_layouts:[[12],[6,6],[4,4,4],[3,3,3,3],[2,2,2,2,2,2],[2,8,2],[4,8],[8,4]],row_classes:[{label:"Example class",cssClass:"example-class"}],col_classes:[{label:"Example class",cssClass:"example-class"}],col_tools:[],row_tools:[],custom_filter:"",content_types:["tinymce"],valid_col_sizes:[1,2,3,4,5,6,7,8,9,10,11,12],source_textarea:""},b),J=["col-lg-","col-sm-","col-"],K=0,L=12;if(I.source_textarea&&d.html(a(I.source_textarea).val()),d.children().length&&!d.find("div.row").length){var M=d.children(),N=a('<div class="row"><div class="col-lg-12"/></div>').appendTo(d);N.find(".col-lg-12").append(M)}e(),h(),d.data("grideditor",{init:h,deinit:i,remove:j})}),c)},a.fn.gridEditor.RTEs={}}(jQuery),function(a){a.fn.gridEditor.RTEs.ckeditor={init:function(b,c){window.CKEDITOR||console.error("CKEditor not available! Make sure you loaded the ckeditor and jquery adapter js files.");var d=this;c.each(function(){var c=a(this);if(!c.hasClass("active")){c.html()==d.initialContent&&c.html("&nbsp;"),c.addClass("active").attr("contenteditable","true");var e=a.extend({},b.ckeditor&&b.ckeditor.config?b.ckeditor.config:{},{on:{instanceReady:function(a){var c;try{c=b.ckeditor.config.on.instanceReady}catch(d){}c&&c.call(this,a),f.focus()}}}),f=CKEDITOR.inline(c.get(0),e)}})},deinit:function(b,c){c.filter(".active").each(function(){var b=a(this);a.each(CKEDITOR.instances,function(a,b){b.destroy()}),b.removeClass("active cke_focus").removeAttr("id").removeAttr("style").removeAttr("spellcheck").removeAttr("contenteditable")})},initialContent:"<p>Lorem initius... </p>"}}(jQuery),function(a){a.fn.gridEditor.RTEs.summernote={init:function(b,c){jQuery().summernote||console.error("Summernote not available! Make sure you loaded the Summernote js file.");var d=this;c.each(function(){var c=a(this);if(!c.hasClass("active")){c.html()==d.initialContent&&c.html(""),c.addClass("active");var e=a.extend(!0,{},b.summernote&&b.summernote.config?b.summernote.config:{},{tabsize:2,airMode:!0,callbacks:{onInit:function(){var a;try{a=b.summernote.config.callbacks.onInit}catch(d){}a&&a.call(this),c.summernote("focus")}}});c.summernote(e)}})},deinit:function(b,c){c.filter(".active").each(function(){var b=a(this);b.summernote("destroy"),b.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>Lorem ipsum dolores</p>"}}(jQuery),function(a){a.fn.gridEditor.RTEs.tinymce={init:function(b,c){window.tinymce||console.error("tinyMCE not available! Make sure you loaded the tinyMCE js file."),c.tinymce||console.error("tinyMCE jquery integration not available! Make sure you loaded the jquery integration plugin.");var d=this;c.each(function(){var c=a(this);if(!c.hasClass("active")){c.html()==d.initialContent&&c.html(""),c.addClass("active");var e=a.extend({},b.tinymce&&b.tinymce.config?b.tinymce.config:{},{inline:!0,oninit:function(c){a("#"+c.settings.id).focus();var d;try{d=b.tinymce.config.oninit}catch(e){}d&&d.call(this)}});c.tinymce(e)}})},deinit:function(b,c){c.filter(".active").each(function(){var b=a(this),c=b.tinymce();c&&c.remove(),b.removeClass("active").removeAttr("id").removeAttr("style").removeAttr("spellcheck")})},initialContent:"<p>Lorem ipsum dolores</p>"}}(jQuery);
//# sourceMappingURL=jquery.grideditor.min.js.map