name = "my-sonicjs-app"
main = "src/index.ts"
compatibility_date = "2025-05-05"
compatibility_flags = ["nodejs_compat"]

# Cloudflare account
account_id = "f61c658f1de7911b0a529f38308adb21"  # Mmcintosh@infowall.com's Account

# Cloudflare Workers settings
workers_dev = true

# D1 Database - PRODUCTION
[[d1_databases]]
binding = "DB"
database_name = "sonicjs-prod-db"
database_id = "032fb85c-4ec9-4133-a2f0-0f3222652a7f"
migrations_dir = "../packages/core/migrations"

# R2 Bucket for media storage - PRODUCTION
[[r2_buckets]]
binding = "MEDIA_BUCKET"
bucket_name = "sonicjs-prod-media"

# KV Cache - PRODUCTION
[[kv_namespaces]]
binding = "CACHE_KV"
id = "b03d586f143e40c8b9da02fb54b2d557"

# Cloudflare AI (Workers AI)
# Enables built-in AI models for semantic search
# See: https://developers.cloudflare.com/workers-ai/
[ai]
binding = "AI"
remote = true

# Cloudflare Vectorize (for AI Search indexes)
# See: https://developers.cloudflare.com/vectorize/
[[vectorize]]
binding = "VECTORIZE_INDEX"
index_name = "sonicjs-search"
remote = true

# Environment variables
[vars]
ENVIRONMENT = "production"

# Observability
[observability]
enabled = true
