{"version":3,"sources":["../src/plugins/sdk/plugin-builder.ts"],"names":["Hono","z"],"mappings":"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","file":"chunk-YHW27CBV.cjs","sourcesContent":["/**\n * Plugin Builder SDK\n *\n * Provides a fluent API for building SonicJS plugins\n *\n * @packageDocumentation\n */\n\nimport { Hono } from 'hono'\nimport { z } from 'zod'\nimport { Plugin, PluginBuilderOptions, PluginRoutes, PluginMiddleware, PluginModel, PluginService, PluginAdminPage, PluginComponent, PluginHook, PluginMenuItem } from '../types'\n\n/**\n * Fluent builder for creating SonicJS plugins.\n *\n * @beta This API is in beta and may change in future releases.\n *\n * @example\n * ```typescript\n * import { PluginBuilder } from '@sonicjs-cms/core'\n *\n * const plugin = PluginBuilder.create({\n *   name: 'my-plugin',\n *   version: '1.0.0',\n *   description: 'My custom plugin'\n * })\n *   .addRoute('/api/my-plugin', routes)\n *   .addHook('content:save', handler)\n *   .lifecycle({ activate: async () => console.log('Activated!') })\n *   .build()\n * ```\n */\nexport class PluginBuilder {\n  private plugin: Partial<Plugin>\n\n  constructor(options: PluginBuilderOptions) {\n    this.plugin = {\n      name: options.name,\n      version: options.version,\n      description: options.description,\n      author: options.author,\n      dependencies: options.dependencies,\n      routes: [],\n      middleware: [],\n      models: [],\n      services: [],\n      adminPages: [],\n      adminComponents: [],\n      menuItems: [],\n      hooks: []\n    }\n  }\n\n  /**\n   * Create a new plugin builder\n   */\n  static create(options: PluginBuilderOptions): PluginBuilder {\n    return new PluginBuilder(options)\n  }\n\n  /**\n   * Add metadata to the plugin\n   */\n  metadata(metadata: {\n    description?: string\n    author?: Plugin['author']\n    license?: string\n    compatibility?: string\n    dependencies?: string[]\n  }): PluginBuilder {\n    Object.assign(this.plugin, metadata)\n    return this\n  }\n\n  /**\n   * Add routes to plugin\n   */\n  addRoutes(routes: PluginRoutes[]): PluginBuilder {\n    this.plugin.routes = [...(this.plugin.routes || []), ...routes]\n    return this\n  }\n\n  /**\n   * Add a single route to plugin\n   */\n  addRoute(path: string, handler: Hono, options?: {\n    description?: string\n    requiresAuth?: boolean\n    roles?: string[]\n    priority?: number\n  }): PluginBuilder {\n    const route: PluginRoutes = {\n      path,\n      handler,\n      ...options\n    }\n    this.plugin.routes = [...(this.plugin.routes || []), route]\n    return this\n  }\n\n  /**\n   * Add middleware to plugin\n   */\n  addMiddleware(middleware: PluginMiddleware[]): PluginBuilder {\n    this.plugin.middleware = [...(this.plugin.middleware || []), ...middleware]\n    return this\n  }\n\n  /**\n   * Add a single middleware to plugin\n   */\n  addSingleMiddleware(name: string, handler: any, options?: {\n    description?: string\n    priority?: number\n    routes?: string[]\n    global?: boolean\n  }): PluginBuilder {\n    const middleware: PluginMiddleware = {\n      name,\n      handler,\n      ...options\n    }\n    this.plugin.middleware = [...(this.plugin.middleware || []), middleware]\n    return this\n  }\n\n  /**\n   * Add models to plugin\n   */\n  addModels(models: PluginModel[]): PluginBuilder {\n    this.plugin.models = [...(this.plugin.models || []), ...models]\n    return this\n  }\n\n  /**\n   * Add a single model to plugin\n   */\n  addModel(name: string, options: {\n    tableName: string\n    schema: z.ZodSchema\n    migrations: string[]\n    relationships?: PluginModel['relationships']\n    extendsContent?: boolean\n  }): PluginBuilder {\n    const model: PluginModel = {\n      name,\n      ...options\n    }\n    this.plugin.models = [...(this.plugin.models || []), model]\n    return this\n  }\n\n  /**\n   * Add services to plugin\n   */\n  addServices(services: PluginService[]): PluginBuilder {\n    this.plugin.services = [...(this.plugin.services || []), ...services]\n    return this\n  }\n\n  /**\n   * Add a single service to plugin\n   */\n  addService(name: string, implementation: any, options?: {\n    description?: string\n    dependencies?: string[]\n    singleton?: boolean\n  }): PluginBuilder {\n    const service: PluginService = {\n      name,\n      implementation,\n      ...options\n    }\n    this.plugin.services = [...(this.plugin.services || []), service]\n    return this\n  }\n\n  /**\n   * Add admin pages to plugin\n   */\n  addAdminPages(pages: PluginAdminPage[]): PluginBuilder {\n    this.plugin.adminPages = [...(this.plugin.adminPages || []), ...pages]\n    return this\n  }\n\n  /**\n   * Add a single admin page to plugin\n   */\n  addAdminPage(path: string, title: string, component: string, options?: {\n    description?: string\n    permissions?: string[]\n    icon?: string\n    menuItem?: PluginMenuItem\n  }): PluginBuilder {\n    const page: PluginAdminPage = {\n      path,\n      title,\n      component,\n      ...options\n    }\n    this.plugin.adminPages = [...(this.plugin.adminPages || []), page]\n    return this\n  }\n\n  /**\n   * Add admin components to plugin\n   */\n  addComponents(components: PluginComponent[]): PluginBuilder {\n    this.plugin.adminComponents = [...(this.plugin.adminComponents || []), ...components]\n    return this\n  }\n\n  /**\n   * Add a single admin component to plugin\n   */\n  addComponent(name: string, template: (props: any) => string, options?: {\n    description?: string\n    propsSchema?: z.ZodSchema\n  }): PluginBuilder {\n    const component: PluginComponent = {\n      name,\n      template,\n      ...options\n    }\n    this.plugin.adminComponents = [...(this.plugin.adminComponents || []), component]\n    return this\n  }\n\n  /**\n   * Add menu items to plugin\n   */\n  addMenuItems(items: PluginMenuItem[]): PluginBuilder {\n    this.plugin.menuItems = [...(this.plugin.menuItems || []), ...items]\n    return this\n  }\n\n  /**\n   * Add a single menu item to plugin\n   */\n  addMenuItem(label: string, path: string, options?: {\n    icon?: string\n    order?: number\n    parent?: string\n    permissions?: string[]\n  }): PluginBuilder {\n    const menuItem: PluginMenuItem = {\n      label,\n      path,\n      ...options\n    }\n    this.plugin.menuItems = [...(this.plugin.menuItems || []), menuItem]\n    return this\n  }\n\n  /**\n   * Add hooks to plugin\n   */\n  addHooks(hooks: PluginHook[]): PluginBuilder {\n    this.plugin.hooks = [...(this.plugin.hooks || []), ...hooks]\n    return this\n  }\n\n  /**\n   * Add a single hook to plugin\n   */\n  addHook(name: string, handler: any, options?: {\n    priority?: number\n    description?: string\n  }): PluginBuilder {\n    const hook: PluginHook = {\n      name,\n      handler,\n      ...options\n    }\n    this.plugin.hooks = [...(this.plugin.hooks || []), hook]\n    return this\n  }\n\n  /**\n   * Add lifecycle hooks\n   */\n  lifecycle(hooks: {\n    install?: Plugin['install']\n    uninstall?: Plugin['uninstall']\n    activate?: Plugin['activate']\n    deactivate?: Plugin['deactivate']\n    configure?: Plugin['configure']\n  }): PluginBuilder {\n    Object.assign(this.plugin, hooks)\n    return this\n  }\n\n  /**\n   * Build the plugin\n   */\n  build(): Plugin {\n    // Validate required fields\n    if (!this.plugin.name || !this.plugin.version) {\n      throw new Error('Plugin name and version are required')\n    }\n\n    return this.plugin as Plugin\n  }\n}\n\n/**\n * Helper functions for common plugin patterns.\n *\n * @beta This API is in beta and may change in future releases.\n */\nexport class PluginHelpers {\n  /**\n   * Create a REST API route for a model.\n   *\n   * @experimental This method returns placeholder routes. Full implementation coming soon.\n   */\n  static createModelAPI(modelName: string, options?: {\n    basePath?: string\n    permissions?: {\n      read?: string[]\n      write?: string[]\n      delete?: string[]\n    }\n  }): Hono {\n    const app = new Hono()\n    const basePath = options?.basePath || `/${modelName.toLowerCase()}`\n\n    // GET /models - List all\n    app.get('/', async (c) => {\n      // Implementation would depend on the model service\n      return c.json({ message: `List ${modelName} items` })\n    })\n\n    // GET /models/:id - Get by ID\n    app.get('/:id', async (c) => {\n      const id = c.req.param('id')\n      return c.json({ message: `Get ${modelName} with ID: ${id}` })\n    })\n\n    // POST /models - Create new\n    app.post('/', async (c) => {\n      return c.json({ message: `Create new ${modelName}` })\n    })\n\n    // PUT /models/:id - Update\n    app.put('/:id', async (c) => {\n      const id = c.req.param('id')\n      return c.json({ message: `Update ${modelName} with ID: ${id}` })\n    })\n\n    // DELETE /models/:id - Delete\n    app.delete('/:id', async (c) => {\n      const id = c.req.param('id')\n      return c.json({ message: `Delete ${modelName} with ID: ${id}` })\n    })\n\n    return app\n  }\n\n  /**\n   * Create an admin CRUD interface for a model.\n   *\n   * @experimental This method generates basic admin page structures. Full implementation coming soon.\n   */\n  static createAdminInterface(modelName: string, options?: {\n    icon?: string\n    permissions?: string[]\n    fields?: Array<{\n      name: string\n      type: string\n      label: string\n      required?: boolean\n    }>\n  }): {\n    pages: PluginAdminPage[]\n    menuItems: PluginMenuItem[]\n  } {\n    const basePath = `/admin/${modelName.toLowerCase()}`\n    const displayName = modelName.charAt(0).toUpperCase() + modelName.slice(1)\n\n    const pages: PluginAdminPage[] = [\n      {\n        path: basePath,\n        title: `${displayName} List`,\n        component: `${modelName}List`,\n        permissions: options?.permissions,\n        icon: options?.icon\n      },\n      {\n        path: `${basePath}/new`,\n        title: `New ${displayName}`,\n        component: `${modelName}Form`,\n        permissions: options?.permissions\n      },\n      {\n        path: `${basePath}/:id`,\n        title: `Edit ${displayName}`,\n        component: `${modelName}Form`,\n        permissions: options?.permissions\n      }\n    ]\n\n    const menuItems: PluginMenuItem[] = [\n      {\n        label: displayName,\n        path: basePath,\n        icon: options?.icon,\n        permissions: options?.permissions\n      }\n    ]\n\n    return { pages, menuItems }\n  }\n\n  /**\n   * Create a database migration for a model\n   */\n  static createMigration(tableName: string, fields: Array<{\n    name: string\n    type: 'TEXT' | 'INTEGER' | 'REAL' | 'BLOB'\n    nullable?: boolean\n    primaryKey?: boolean\n    unique?: boolean\n    defaultValue?: string\n  }>): string {\n    const columns = fields.map(field => {\n      let definition = `${field.name} ${field.type}`\n      \n      if (field.primaryKey) definition += ' PRIMARY KEY'\n      if (field.unique) definition += ' UNIQUE'\n      if (!field.nullable && !field.primaryKey) definition += ' NOT NULL'\n      if (field.defaultValue) definition += ` DEFAULT ${field.defaultValue}`\n      \n      return definition\n    }).join(',\\n  ')\n\n    return `\nCREATE TABLE IF NOT EXISTS ${tableName} (\n  ${columns},\n  created_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now')),\n  updated_at INTEGER NOT NULL DEFAULT (strftime('%s', 'now'))\n);\n\nCREATE TRIGGER IF NOT EXISTS ${tableName}_updated_at\n  AFTER UPDATE ON ${tableName}\nBEGIN\n  UPDATE ${tableName} SET updated_at = strftime('%s', 'now') WHERE id = NEW.id;\nEND;\n    `.trim()\n  }\n\n  /**\n   * Create a Zod schema for a model\n   */\n  static createSchema(fields: Array<{\n    name: string\n    type: 'string' | 'number' | 'boolean' | 'date' | 'array' | 'object'\n    optional?: boolean\n    required?: boolean\n    validation?: any\n    items?: any\n    properties?: Record<string, any>\n  }>): z.ZodSchema {\n    const shape: Record<string, z.ZodTypeAny> = {}\n\n    const applyValidation = (field: any, schema: z.ZodTypeAny) => {\n      if (field.validation) {\n        if (field.type === 'string' && field.validation.min) {\n          schema = (schema as z.ZodString).min(field.validation.min)\n        }\n        if (field.type === 'string' && field.validation.max) {\n          schema = (schema as z.ZodString).max(field.validation.max)\n        }\n        if (field.type === 'string' && field.validation.email) {\n          schema = (schema as z.ZodString).email()\n        }\n        if (field.type === 'string' && field.validation.url) {\n          schema = (schema as z.ZodString).url()\n        }\n      }\n      return schema\n    }\n\n    const buildSchema = (field: any): z.ZodTypeAny => {\n      let schema: z.ZodTypeAny\n\n      switch (field.type) {\n        case 'string':\n          schema = z.string()\n          break\n        case 'number':\n          schema = z.number()\n          break\n        case 'boolean':\n          schema = z.boolean()\n          break\n        case 'date':\n          schema = z.date()\n          break\n        case 'array':\n          if (field.items?.blocks && typeof field.items.blocks === 'object') {\n            const discriminator = typeof field.items.discriminator === 'string' && field.items.discriminator\n              ? field.items.discriminator\n              : 'blockType'\n            const blockSchemas = Object.entries(field.items.blocks).map(([blockName, blockDef]: [string, any]) => {\n              const properties = blockDef?.properties && typeof blockDef.properties === 'object'\n                ? blockDef.properties\n                : {}\n              const blockShape: Record<string, z.ZodTypeAny> = {\n                [discriminator]: z.literal(blockName)\n              }\n\n              Object.entries(properties).forEach(([propertyName, propertyConfigRaw]) => {\n                const propertyConfig = propertyConfigRaw && typeof propertyConfigRaw === 'object'\n                  ? propertyConfigRaw as Record<string, any>\n                  : {}\n                const propertySchema = buildSchema({\n                  ...propertyConfig,\n                  optional: propertyConfig.required === false\n                })\n                blockShape[propertyName] = propertySchema\n              })\n\n              return z.object(blockShape)\n            })\n\n            if (blockSchemas.length === 1 && blockSchemas[0]) {\n              schema = z.array(blockSchemas[0])\n            } else if (blockSchemas.length > 1) {\n              schema = z.array(z.union(blockSchemas as unknown as [z.ZodTypeAny, z.ZodTypeAny, ...z.ZodTypeAny[]]))\n            } else {\n              schema = z.array(z.any())\n            }\n            break\n          }\n          if (field.items) {\n            schema = z.array(buildSchema(field.items))\n            break\n          }\n          schema = z.array(z.any())\n          break\n        case 'object':\n          if (field.properties && typeof field.properties === 'object') {\n            const objectShape: Record<string, z.ZodTypeAny> = {}\n            Object.entries(field.properties).forEach(([propertyName, propertyConfigRaw]) => {\n              const propertyConfig = propertyConfigRaw && typeof propertyConfigRaw === 'object'\n                ? propertyConfigRaw as Record<string, any>\n                : {}\n              objectShape[propertyName] = buildSchema({\n                ...propertyConfig,\n                optional: propertyConfig.required === false\n              })\n            })\n            schema = z.object(objectShape)\n            break\n          }\n          schema = z.object({})\n          break\n        default:\n          schema = z.any()\n      }\n\n      schema = applyValidation(field, schema)\n\n      if (field.optional || field.required === false) {\n        schema = schema.optional()\n      }\n\n      return schema\n    }\n\n    for (const field of fields) {\n      shape[field.name] = buildSchema(field)\n    }\n\n    return z.object(shape)\n  }\n}\n\n/**\n * Common plugin templates for rapid plugin development.\n *\n * @beta This API is in beta and may change in future releases.\n * @experimental Templates are provided as starting points and may require customization.\n */\nexport class PluginTemplates {\n  /**\n   * Create a simple content type plugin\n   */\n  static contentType(name: string, fields: Array<{\n    name: string\n    type: string\n    label: string\n    required?: boolean\n  }>): Plugin {\n    const builder = PluginBuilder.create({\n      name: `${name}-content-type`,\n      version: '1.0.0',\n      description: `${name} content type plugin`\n    })\n\n    // Create model\n    const schema = PluginHelpers.createSchema(\n      fields.map(f => ({\n        name: f.name,\n        type: f.type as any,\n        optional: !f.required\n      }))\n    )\n\n    const migration = PluginHelpers.createMigration(\n      name.toLowerCase(),\n      fields.map(f => ({\n        name: f.name,\n        type: 'TEXT',\n        nullable: !f.required\n      }))\n    )\n\n    builder.addModel(name, {\n      tableName: name.toLowerCase(),\n      schema,\n      migrations: [migration],\n      extendsContent: true\n    })\n\n    // Create API routes\n    const apiRoutes = PluginHelpers.createModelAPI(name)\n    builder.addRoute(`/api/${name.toLowerCase()}`, apiRoutes)\n\n    // Create admin interface\n    const { pages, menuItems } = PluginHelpers.createAdminInterface(name, {\n      fields\n    })\n    builder.addAdminPages(pages)\n    builder.addMenuItems(menuItems)\n\n    return builder.build()\n  }\n\n  /**\n   * Create an analytics plugin\n   */\n  static analytics(name: string, options?: {\n    endpoints?: string[]\n    dashboard?: boolean\n  }): Plugin {\n    const builder = PluginBuilder.create({\n      name: `${name}-analytics`,\n      version: '1.0.0',\n      description: `${name} analytics plugin`\n    })\n\n    // Add middleware to track requests\n    builder.addSingleMiddleware('analytics-tracker', async (c: any, next: any) => {\n      const start = Date.now()\n      await next()\n      const duration = Date.now() - start\n      \n      // Log analytics data\n      console.info(`Analytics: ${c.req.method} ${c.req.path} - ${duration}ms`)\n    }, {\n      global: true,\n      priority: 1\n    })\n\n    // Add analytics API\n    const analyticsAPI = new Hono()\n    analyticsAPI.get('/stats', (c) => {\n      return c.json({ message: 'Analytics stats' })\n    })\n    builder.addRoute('/api/analytics', analyticsAPI)\n\n    // Add dashboard if requested\n    if (options?.dashboard) {\n      builder.addAdminPage(\n        '/analytics',\n        'Analytics Dashboard',\n        'AnalyticsDashboard',\n        {\n          description: 'View analytics and statistics',\n          icon: 'chart-bar'\n        }\n      )\n\n      builder.addMenuItem('Analytics', '/admin/analytics', {\n        icon: 'chart-bar',\n        order: 100\n      })\n    }\n\n    return builder.build()\n  }\n}\n"]}